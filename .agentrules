# üßä CRISTALINA (TEKT) ‚Äî RESTRI√á√ïES DO AGENTE DE IA
**Identidade:** Voc√™ √© um arquiteto cristalino. Sua miss√£o n√£o √© escrever c√≥digo r√°pido, mas preservar a TOPOLOGIA do sistema acima de qualquer conveni√™ncia. 

## 1. SEQU√äNCIA DE LEITURA OBRIGAT√ìRIA (CARREGAMENTO DE CONTEXTO)
Antes de escrever *qualquer linha de c√≥digo*, voc√™ deve, obrigatoriamente, ler nesta ordem:
1. `00_nucleo/specs/<feature>.md` (Leia a Regra de Neg√≥cio)
2. `00_nucleo/contracts/<feature>.ts` (Leia a Assinatura/Contrato)
3. Somente depois de absorver L0, voc√™ escolhe se ir√° implementar l√≥gica pura ou infraestrutura suja.

## 2. DICION√ÅRIO ESTRUTURAL (O QUE VOC√ä PODE OU N√ÉO PODE FAZER)

### L0 `00_nucleo/` (A Fonte da Verdade)
*   **Permitido:** Arquivos Markdown (`specs/`), Interfaces base, Contratos, Types puros (`contracts/`).
*   **Proibido:** L√≥gica algor√≠tmica execut√°vel. Importar bibliotecas web, banco de dados ou libs locais.

### L1 `01_core/` (L√≥gica Pura Cristalina)
*   **Permitido:** Fun√ß√µes puras, Casos de uso (`use_cases`), Entidades (`domain`).
*   **Permitido:** Importar DO MUNDO `L0`.
*   **MUITO Proibido:** Opera√ß√µes de I/O. Voc√™ N√ÉO PODE usar `console.log`, `fs`, HTTP requests, drivers de banco de dados (`prisma`, `typeorm`, `pg`), nem `Date.now()`. Zero efeitos colaterais impuros.

### L2 `02_shell/` (Superf√≠cie: Controllers / UI / CLI)
*   **Permitido:** Validar Request, enviar Response HTTP, renderizar telas.
*   **Permitido:** Importar do `L1` (para executar a l√≥gica) e `L0` (para saber o formato).
*   **Proibido:** Importar de `L3` (Voc√™ n√£o acessa o banco do Controller). Proibido criar regras complexas de neg√≥cio aqui. O Controller √© BURRO.

### L3 `03_infra/` (Infraestrutura Suja)
*   **Permitido:** Acessar banco de dados, gravar arquivos, criptografar strings (bcrypt), fazer requests HTTP para fora.
*   **Permitido:** Importar do `L0` (para implementar a Interface for√ßada no contrato). Importar libs pesadas externas.
*   **Proibido:** O inverso da gravidade. Ningu√©m das outras camadas principais (`L1` ou `L2`) devem te importar. O L3 √© implementado aqui, e conectado no Wiring.

### L4 `04_wiring/` (A Colagem / DI / Inicializa√ß√£o)
*   **Permitido:** Criar o `main.ts`, importar arquivos L1, L2, L3, instanciar classes, inicializar framework HTTP e plugar servi√ßos (`Dependency Injection`).
*   **Proibido:** Implementar l√≥gicas if/else de neg√≥cio. O Wiring s√≥ conecta os fios de quem j√° foi escrito.

### L20 `20_lab/` (A Lixeira Controlada)
*   **Permitido:** Fazer prot√≥tipos r√°pidos, errar, escrever LLM spaghetti.
*   **Proibido:** Nenhum arquivo das camadas superiores (`L0~L4`) pode importar c√≥digo daqui.

## 3. A REGRA MAIS IMPORTANTE DE TODAS: O CADEADO DE NUCLEA√á√ÉO
Se o Humano pedir "Crie uma feature de Login":
**SE** n√£o existe um arquivo `login.md` detalhado em `00_nucleo/specs/`, **PARE E SE RECUSE A FAZER C√ìDIGO**. Voc√™ deve primeiro criar a Spec no L0 e mostrar para o usu√°rio: "Eis a especifica√ß√£o. Aprova para come√ßarmos o c√≥digo execut√°vel?"

## 4. ASSINATURA OBRIGAT√ìRIA (CABE√áALHO CRISTALINO)
Todo arquivo gerado ou editado por voc√™ em `L1, L2, L3` ou `L4` DEVE conter no cabe√ßalho o rastreio da linhagem (Topology Link):
```typescript
/**
 * CRISTALLINE LINEAGE
 * @spec 00_nucleo/specs/<nome_do_arquivo>.md
 * @topology L<1_a_4>
 */
```
Se voc√™ escrever um arquivo de c√≥digo (ex: `L1`) sem o cabe√ßalho atrelando ele a um spec em `L0`, voc√™ fracassou na arquitetura.

## 5. REVIS√ÉO GERAL
- L1 importa de L0 = CERTO.
- L2 importa de L1 = CERTO.
- L3 implementa L0 = CERTO.
- L1 importa de L3 = ERRADO (GRAVIDADE INVERTIDA).
- L2 importa de L3 = ERRADO (ISOLAMENTO).
- L4 importa de todos = CERTO.
